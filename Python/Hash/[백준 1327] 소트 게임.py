'''
[ë°±ì¤€ 1327] ì†ŒíŠ¸ ê²Œì„
https://www.acmicpc.net/problem/1327

[ğŸ“Œ ì „ëµ]
- ëª¨ë“  ê²½ìš°ë¥¼ íš¨ìœ¨ì ìœ¼ë¡œ ëŒì•„ë³¸ë‹¤ -> bfs
- ë’¤ì§‘ì—ˆì„ ë•Œ ì´ë¯¸ ë°©ë¬¸í–ˆë˜ ë¬¸ìì—´ì´ë©´ ë‹¤ì‹œ ë°©ë¬¸í•  í•„ìš” ì—†ë‹¤ -> í•´ì‹œ

[âœ… í’€ì´]
1. ëª¨ë‘ ë’¤ì§‘ì–´ ë³´ê¸° ìœ„í•´ bfsë¥¼ í™œìš©í•˜ê³ , ë°©ë¬¸ ì²˜ë¦¬ì— ë”•ì…”ë„ˆë¦¬ë¥¼ í™œìš©
2. íì— [ë’¤ì§‘ì€ ë¬¸ìì—´, í˜„ì¬ ì„ íƒí•œ ê°œìˆ˜] í˜•ì‹ìœ¼ë¡œ ë„£ì„ ê²ƒ. 
    -> ë”°ë¼ì„œ ì´ˆê¹ƒê°’ì€ [ì…ë ¥ë°›ì€ ìˆœì—´, 0]
3. íì— ìš”ì†Œê°€ ì¡´ì¬í•  ë•Œê¹Œì§€ ìˆœíšŒ
    3-1.íì—ì„œ popleftí•œë‹¤. í•´ë‹¹ ë¬¸ìì—´ì´ ì •ë‹µ ë¬¸ìì—´ê³¼ ê°™ë‹¤ë©´ ê·¸ëŒ€ë¡œ ë¦¬í„´.
        ì•„ë‹ˆë¼ë©´ ë¬¸ìì—´ì„ kê°œì”© ë’¤ì§‘ì–´ë³¸ë‹¤.
    3-2. ë’¤ì§‘ì€ ë¬¸ìì—´ì„ ë°©ë¬¸í•œ ì ì´ ìˆë‹¤ë©´ íŒ¨ìŠ¤
    3-3. ë°©ë¬¸í•œ ì ì´ ì—†ë‹¤ë©´ ì„ íƒ ê°œìˆ˜ë¥¼ 1 ê°±ì‹ í•˜ì—¬ íì— ë„£ìŒ

[ğŸ“ ê¸°ë¡]
LV: ê³¨ë“œ4
í’€ì´ ì‹œê°„: í˜¼ì í’€ì´í•˜ì§€ ëª»í•¨.
'''

from collections import deque
import sys

input = sys.stdin.readline
n, k = map(int, input().strip().split())
nums = input().strip().split() # ì…ë ¥ë°›ì€ ìˆœì—´
nums_str = ''.join(nums) # ìˆœì—´ì„ ë¬¸ìì—´ë¡œ í•©ì¹¨ (ê´€ë¦¬í•˜ê¸° ì‰½ê²Œ)
res = ''.join(sorted(nums)) # ë§Œë“¤ì–´ì•¼ í•  ìµœì¢… ë¬¸ìì—´
v_dict = {} # ë°©ë¬¸ ì²˜ë¦¬ë¥¼ í•  ë”•ì…”ë„ˆë¦¬

def bfs(): # bfs íƒìƒ‰ ì‹¤ì‹œ
    q = deque([[nums_str, 0]]) # [ë’¤ì§‘ì€ ë¬¸ìì—´, í˜„ì¬ ì„ íƒí•œ ìˆ˜ì˜ ê°œìˆ˜]
    v_dict[nums_str] = True # ì´ˆê¸° ë°©ë¬¸ ì²˜ë¦¬

    while q:
        f, cnt = q.popleft()

        if f == res: return cnt # popleftí•œ ê°’ì´ ê²°ê³¼ì™€ ê°™ìœ¼ë©´ cnt ë¦¬í„´

        for s in range(len(nums)-k+1):
            # së¶€í„° kë§Œí¼ ë’¤ì§‘ê³  ë¬¸ìì—´ë¡œ ë³€í™˜
            tmp_f = list(f)
            tmp_f[s:s + k] = reversed(tmp_f[s:s + k]) 
            tmp_str = ''.join(tmp_f)

            if tmp_str in v_dict: continue # ë°©ë¬¸í•œ ì ì´ ìˆë‹¤ë©´ ë„˜ì–´ê°
            v_dict[tmp_str] = True # ì—†ë‹¤ë©´ ë°©ë¬¸ì²˜ë¦¬

            q.append([tmp_str, cnt+1]) # ìˆ˜ì˜ ê°œìˆ˜ë¥¼ í•˜ë‚˜ ëŠ˜ë ¤ì¤Œ

    # ì´ ì¤„ê¹Œì§€ ì˜¤ë©´ ì˜¤ë¦„ì°¨ìˆœìœ¼ë¡œ ë§Œë“¤ ìˆ˜ ì—†ë‹¤ëŠ” ëœ»
    return -1

print(bfs())