'''
[ë°±ì¤€ 14893] ê²½ì‚¬ë¡œ
https://www.acmicpc.net/problem/14890

[ğŸ“Œ ì „ëµ]
- ë¬¸ì œì— ì£¼ì–´ì§„ ê²½ì‚¬ë¡œë¥¼ ë§Œë“¤ ìˆ˜ ì—†ëŠ” ì¡°ê±´ì„ ì²´í¬í•˜ì—¬ í’€ì´

[âœ… í’€ì´]
arrë°°ì—´ì´ ì§€ë‚˜ê°ˆ ìˆ˜ ìˆëŠ” ê¸¸ì¸ì§€ íŒë‹¨í•˜ëŠ” í•¨ìˆ˜ check(arr)
ê¸¸ì„ êµ¬ì„±í•˜ëŠ” ì¹¸ì˜ ìœ ì˜ë¯¸í•œ ì„±ì§ˆì€ ì•„ë˜ì™€ ê°™ìŒ.

1. ë†’ì´ ì°¨ê°€ 1ë³´ë‹¤ í¼ -> ê²½ì‚¬ë¡œì˜ ë†’ì´ëŠ” 1ì´ë¯€ë¡œ ì–´ì°¨í”¼ ê²½ì‚¬ë¡œë¥¼ ë†“ì„ ìˆ˜ ì—†ìŒ
2. ë†’ì´ê°€ 1 ì»¤ì§/ì‘ì•„ì§ -> ë¬¸ì œì— ì£¼ì–´ì§„ ì¡°ê±´ë“¤ì„ í™œìš©í•˜ì—¬ ê²½ì‚¬ë¡œë¥¼ ë†“ì„ ìˆ˜ ìˆëŠ”ì§€ ì—¬ë¶€ë¥¼ í™•ì¸

2ë²ˆ ì¡°ê±´ì¼ ë•Œ ë¬¸ì œì—ì„œ ì£¼ì–´ì§„ ì•„ë˜ ì¡°ê±´ë“¤ì„ ëª¨ë‘ ì²´í¬
- ê²½ì‚¬ë¡œë¥¼ ë†“ë‹¤ê°€ ë²”ìœ„ë¥¼ ë²—ì–´ë‚˜ëŠ” ê²½ìš°
    - í˜„ì¬ ì¸ë±ìŠ¤ iì— lì„ ë”í•˜ê±°ë‚˜ ë¹¼ì„œ ë²—ì–´ë‚˜ëŠ”ì§€ë¥¼ ì²´í¬í•¨
- ê²½ì‚¬ë¡œë¥¼ ë†“ì€ ê³³ì— ë˜ ê²½ì‚¬ë¡œë¥¼ ë†“ëŠ” ê²½ìš°
    - ê²½ì‚¬ë¡œë¥¼ ë†“ì•˜ëŠ”ì§€ë¥¼ ì €ì¥í•  bridge ë°°ì—´ì„ í™œìš©
    - ê²½ì‚¬ë¡œë¥¼ ë†“ìœ¼ë ¤ê³  í•  ë•Œ bridge ë°°ì—´ì˜ ê°’ì´ Falseì¸ì§€ í™•ì¸
    - Falseì¼ ê²½ìš° ê²½ì‚¬ë¡œë¥¼ ë†“ê³  Trueë¡œ ê°±ì‹ í•˜ê³ , Trueì¼ ê²½ìš°ì—ëŠ” ê²½ì‚¬ë¡œë¥¼ ë†“ì„ ìˆ˜ ì—†ìŒ
- ë‚®ì€ ì§€ì ì˜ ì¹¸ì˜ ë†’ì´ê°€ ëª¨ë‘ ê°™ì§€ ì•Šê±°ë‚˜, Lê°œê°€ ì—°ì†ë˜ì§€ ì•Šì€ ê²½ìš°
    - í˜„ì¬ ë†’ì´ì™€ ê²½ì‚¬ë¡œë¥¼ ë†“ìœ¼ë ¤ëŠ” ì¹¸ì˜ ë†’ì´ê°€ ê°™ì€ì§€ í™•ì¸

ì£¼ì–´ì§„ ì§€ë„ì˜ í–‰ê³¼ ì—´ì˜ ë°°ì—´ ìš”ì†Œë“¤ì„ ìˆœíšŒí•˜ë©° check í•¨ìˆ˜ í˜¸ì¶œ

[ğŸ“ ê¸°ë¡]
LV: ê³¨ë“œ3 
í’€ì´ ì‹œê°„: 1ì‹œê°„ ì œí•œì„ ë‘ì—ˆìœ¼ë‚˜ ì œí•œ ì‹œê°„ ë‚´ í’€ì´í•˜ì§€ ëª»í•¨.
'''


import sys

input = sys.stdin.readline

n, l = map(int, input().split())
board = []
ans = 0

for _ in range(n):
    row = list(map(int, input().split()))
    board.append(row)

# ê²½ì‚¬ë¡œë¥¼ ë„£ì„ ìˆ˜ ì—†ëŠ” ê²½ìš°ì— False ë°˜í™˜
def check(arr):
    bridge = [False] * n

    for i in range(1, n):
        # ë†’ì´ ì°¨ì´ê°€ 1ë³´ë‹¤ í° ê²½ìš°
        if abs(arr[i] - arr[i-1]) > 1:
            return False

        if arr[i] - arr[i-1] == 1: # ë†’ì´ê°€ 1 ì»¤ì§„ ê²½ìš°
            if i-l < 0: return False

            for j in range(l):
                if arr[i-1] != arr[i-j-1]: return False
                elif bridge[i-j-1]: return False
                elif not bridge[i-j-1]:
                    bridge[i-j-1] = True

        elif arr[i] - arr[i-1] == -1: # ë†’ì´ê°€ 1 ì‘ì•„ì§„ ê²½ìš°
            if i+l > n: return False

            for j in range(l):
                if arr[i] != arr[i+j]: return False
                elif bridge[i+j]: return False
                elif not bridge[i+j]: bridge[i+j] = True

    return True


# í–‰
for i in range(n):
    row = board[i]
    
    ans += check(row)
    
# ì—´
for i in range(n):
    col = []
    
    for j in range(n):
        col.append(board[j][i]) 

    ans += check(col)

print(ans)