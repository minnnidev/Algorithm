//
//  [ë°±ì¤€ 12852] 1ë¡œ ë§Œë“¤ê¸° 2.swift
//  Algorithm
//
//  Created by ê¹€ë¯¼ on 2/19/24.
//
// ë°±ì¤€ 12852 1ë¡œ ë§Œë“¤ê¸° 2 https://www.acmicpc.net/problem/12852

/*
[ğŸ“Œ ì „ëµ]
1ë¡œ ë§Œë“¤ê¸° ë¬¸ì œì—ì„œ ê·¸ ê²½ë¡œê¹Œì§€ ê°™ì´ ì¶œë ¥í•´ì•¼ í•˜ëŠ” ë¬¸ì œ.
nê¹Œì§€ì˜ ìµœì†Œ ì—°ì‚° íšŸìˆ˜ë¥¼ dp ì•Œê³ ë¦¬ì¦˜ìœ¼ë¡œ êµ¬í•˜ê³ , ê²½ë¡œëŠ” në¶€í„° ì—­ìˆœìœ¼ë¡œ ì°¾ì•„ë‚˜ê°€ëŠ” í’€ì´ì™€
í•œë²ˆì— ì—°ì‚° íšŸìˆ˜ì™€ ê²½ë¡œê¹Œì§€ êµ¬í•˜ëŠ” 2ê°€ì§€ í’€ì´ë¡œ êµ¬í˜„í–ˆë‹¤.
*/

/*
[âœ… 1ë²ˆ í’€ì´]
dp í…Œì´ë¸”ì„ ìˆ«ì xê¹Œì§€ í•„ìš”í•œ ìµœì†Œ ì—°ì‚°ì˜ íšŸìˆ˜ë¡œ ì •ì˜í•˜ì—¬
nê¹Œì§€ ìˆœíšŒí•˜ë©°
í˜„ì¬ ì¸ë±ìŠ¤ê°€
1. 3ìœ¼ë¡œ ë‚˜ëˆ„ì–´ì§€ëŠ” ê²½ìš°ì—ëŠ” d[i] = d[i/3] + 1
2. 2ë¡œ ë‚˜ëˆ„ì–´ì§€ëŠ” ê²½ìš°ì—ëŠ” d[i] = d[i/2] + 1
3. ëª¨ë“  ê²½ìš°ì— d[i] = d[i-1] + 1
ì´ ì¤‘ ìµœì†Ÿê°’ì„ êµ¬í•˜ì—¬ d[i]ì— ì €ì¥í•´ ì¤€ë‹¤.
ì´ë¥¼ ë°˜ë³µí•˜ë©° d[n]ì˜ ê°’ì„ êµ¬í•´ì¤€ë‹¤.

ê²½ë¡œë¥¼ êµ¬í•˜ê¸° ìœ„í•´ në¶€í„° ì—­ìˆœìœ¼ë¡œ ì°¾ì•„ê°„ë‹¤.
d[i/3], d[i/2], d[i-1] ì¤‘ ìµœì†Ÿê°’ì´, ië¡œ ë„ë‹¬í•˜ê¸° ìœ„í•œ ê²½ë¡œì´ë‹¤.
ë”°ë¼ì„œ í•´ë‹¹ ê²½ìš°ë¡œ ì¸ë±ìŠ¤ë¥¼ ê°±ì‹ í•œ í›„, ê°±ì‹ í•œ ì¸ë±ìŠ¤ë¶€í„° ë‹¤ì‹œ íƒìƒ‰ì„ ì‹œì‘í•˜ì—¬ ëª¨ë“  ê²½ë¡œë¥¼ êµ¬í•œë‹¤.
 */
//let n = Int(readLine()!)!
//var d = Array(repeating: 0, count: n+1)
//
//for i in 1...n {
//    if i == 1 { continue }
//    if i == 2 {
//        d[2] = 1
//        continue
//    }
//
//    var cnt = Int.max
//    if i % 3 == 0 { cnt = min(cnt, d[i/3]) }
//    if i % 2 == 0 { cnt = min(cnt, d[i/2]) }
//    cnt = min(cnt, d[i-1])
//
//    d[i] = cnt + 1
//}
//
//var index = n
//var paths = [n]
//while index > 1 {
//    var (d3, d2, d1) = (Int.max, Int.max, Int.max)
//    if index % 3 == 0 { d3 = d[index / 3] }
//    if index % 2 == 0 { d2 = d[index / 2] }
//    d1 = d[index-1]
//
//    let min = min(d3, d2, d1)
//    if min == d3 {
//        index /= 3
//    } else if min == d2 {
//        index /= 2
//    } else {
//        index -= 1
//    }
//
//    paths.append(index)
//}
//
//print(d[n])
//print(paths.map { String($0) }.joined(separator: " "))

/*
 [âœ… 2ë²ˆ í’€ì´]
 prevë¼ëŠ” ë³€ìˆ˜ë¥¼ ë§Œë“¤ì–´ iê¹Œì§€ ì˜¤ê¸° ìœ„í•´ i/3, i/2, i-1 ì¸ë±ìŠ¤ ì¤‘ ì–´ëŠ ê²½ë¡œë¥¼ í†µí•´ ë„ë‹¬í•˜ì˜€ëŠ”ì§€
 ì €ì¥í•œë‹¤.
 prev ë³€ìˆ˜ëŠ” path ë°°ì—´ì— ì €ì¥í•˜ì—¬ ê²½ë¡œ ì¶œë ¥ ì‹œì— ì‚¬ìš©í•œë‹¤.
 ë”°ë¼ì„œ path[i]ëŠ” iì— ë„ë‹¬í•˜ê¸° ì „ì— path[i] ìˆ«ìë¥¼ ê±°ì³¤ë‹¤ëŠ” ì˜ë¯¸ê°€ ëœë‹¤.
 */
let n = Int(readLine()!)!
var d = Array(repeating: 0, count: n+1)
var path = Array(repeating: 0, count: n+1)

for i in 2..<n+1 {
    d[i] = d[i-1] + 1
    var prev = n-1

    if i % 3 == 0 && d[i/3] + 1 < d[i] {
        d[i] = d[i/3] + 1
        prev = i/3
    }

    if i % 2 == 0 && d[i/2] + 1 < d[i] {
        d[i] = d[i/2] + 1
        prev = i/2
    }

    path[i] = prev
}

var x = n
var answer = ""

while x > 0 {
    answer += "\(x) "
    x = path[x]
}

print(d[n])
print(answer.map { String($0) }.joined(separator: " "))
