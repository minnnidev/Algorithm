//
//  [í”„ë¡œê·¸ë˜ë¨¸ìŠ¤] ì—¬í–‰ ê²½ë¡œ.swift
//  Algorithm
//
//  Created by ê¹€ë¯¼ on 8/19/24.
//
// í”„ë¡œê·¸ë˜ë¨¸ìŠ¤ ì—¬í–‰ ê²½ë¡œ https://school.programmers.co.kr/learn/courses/30/lessons/43164

/*
[ğŸ“Œ ì „ëµ]
 dfsë¡œ ì—¬í–‰ ê²½ë¡œ íƒìƒ‰í•˜ê¸°
    - ì£¼ì–´ì§„ í•­ê³µê¶Œì„ ëª¨ë‘ í™œìš©í•œë‹¤ëŠ” ì¡°ê±´ì„ í™œìš©
    - ê°€ëŠ¥í•œ ê²½ë¡œê°€ 2ê° ì´ìƒì¼ ê²½ìš° ì•ŒíŒŒë²³ ìˆœì„œê°€ ì•ì„œëŠ” ê²½ë¡œë¥¼ ì„ íƒ
    - ì•ŒíŒŒë²³ ìˆœì„œê°€ ì•ì„œëŠ” ê²½ë¡œë¥¼ ì„ íƒí–ˆì„ ë•Œ, ì£¼ì–´ì§„ í•­ê³µê¶Œì„ ëª¨ë‘ í™œìš©í•˜ì§€ ëª»í•˜ëŠ” ê²½ìš°ê°€ ìƒê¸´ë‹¤ë©´ ì´ ê²½ìš°ëŠ” ì‚¬ìš© ë¶ˆê°€

[âœ… í’€ì´]
 1. ì•ŒíŒŒë²³ ìˆœì„œë¡œ ì•ì„œëŠ” ê²½ë¡œë¥¼ ì„ íƒí•´ì•¼ í•¨ -> ë„ì°©ì§€ ê¸°ì¤€ìœ¼ë¡œ ì•ŒíŒŒë²³ìˆœìœ¼ë¡œ ì •ë ¬
 2. dfs í•¨ìˆ˜ êµ¬ì„± (cur: í˜„ì¬ ì¶œë°œì§€, k: ë‚˜ëŠ” í˜„ì¬ kê°œì˜ ê³µí•­ì„ ë°©ë¬¸í–ˆë‹¤)
    - ëª¨ë“  í•­ê³µê¶Œì„ ì“°ë ¤ë©´ (í‹°ì¼“ ê°œìˆ˜ + 1)ê°œì˜ ê³µí•­ ë°©ë¬¸í•´ì•¼ í•¨(ì¶œë°œì§€ ICN í¬í•¨) -> dfs íƒˆì¶œ ì¡°ê±´
    - í•­ê³µê¶Œì„ ìˆœíšŒí•˜ë©°, í•´ë‹¹ ì¶œë°œì§€ì— í•´ë‹¹í•˜ëŠ” ëª©ì ì§€ í‹°ì¼“ì„ ì°¾ê¸°
    - ì•„ì§ ì‚¬ìš©í•˜ì§€ ì•Šì€ í‹°ì¼“ì´ë¼ë©´ ì‚¬ìš© í›„, dfs(ëª©ì ì§€, k+1) í˜¸ì¶œ
    - í•´ë‹¹ dfs í•¨ìˆ˜ê°€ ëë‚˜ë©´ ì‚¬ìš© ì²˜ë¦¬ë¥¼ í•´ì œí•˜ì—¬ ë‹¤ë¥¸ ì—¬í–‰ ê²½ë¡œ ì„¤ì •ì— ëŒ€ë¹„
    - ê°€ì¥ ì²« ë²ˆì§¸ë¡œ (í‹°ì¼“ ê°œìˆ˜ + 1)ê°œë¡œ ì™„ì„±ëœ ì—¬í–‰ ê²½ë¡œê°€ ì•ŒíŒŒë²³ ìˆœì„œê°€ ì•ì„œëŠ”ëŒ€ë¡œ ì„¤ì •ëœ ê²½ë¡œ
*/


var visited = [Bool]()
var sortedTickets = [[String]]()
var ans = [String]()
var result = [[String]]()
var n = 0

func dfs(_ cur: String, _ k: Int) {
    if k == n+1 {
        result.append(ans)
        return
    }

    for i in 0..<n {
        let tick = sortedTickets[i]

        if visited[i] { continue }
        if tick[0] != cur { continue }

        visited[i] = true
        ans[k] = tick[1]
        dfs(tick[1], k+1)
        visited[i] = false
    }
}

func solution(_ tickets:[[String]]) -> [String] {
    n = tickets.count
    visited = Array(repeating: false, count: n+3)
    ans = Array(repeating: "", count: n+1)
    result = [[String]]()

    sortedTickets = tickets.sorted { $0[1] < $1[1] }

    ans[0] = "ICN"
    dfs("ICN", 1)

    return result[0]
}
