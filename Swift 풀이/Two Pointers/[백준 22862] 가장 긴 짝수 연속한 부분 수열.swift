//
//  [ë°±ì¤€ 22862] ê°€ì¥ ê¸´ ì§ìˆ˜ ì—°ì†í•œ ë¶€ë¶„ ìˆ˜ì—´.swift
//  Algorithm
//
//  Created by ê¹€ë¯¼ on 3/29/24.
//
// ë°±ì¤€ 22862 ê°€ì¥ ê¸´ ì§ìˆ˜ ì—°ì†í•œ ë¶€ë¶„ ìˆ˜ì—´ https://www.acmicpc.net/problem/22862

/*
[ğŸ“Œ ì „ëµ]
 kê°œ ì´í•˜ì˜ í™€ìˆ˜ë¥¼ í¬í•¨í•˜ëŠ” ê°€ì¥ ê¸´ ìˆ˜ì—´ì„ ì°¾ëŠ”ë‹¤.
 kê°œ ì´í•˜ì˜ í™€ìˆ˜ë¥¼ í¬í•¨í•˜ë©´, ë¬¸ì œì—ì„œ ì£¼ì–´ì§„ ì œê±°ë¥¼ í†µí•´ ì§ìˆ˜ì˜ ê°œìˆ˜ë¥¼ êµ¬í•  ìˆ˜ ìˆë‹¤.
 ì‹¤ì œë¡œ ì œê±°ë¥¼ í•˜ì§€ ì•Šì•„ë„ ì§ìˆ˜ì˜ ê°œìˆ˜ë§Œ ì„¸ë©´ ëœë‹¤.
 ê°€ì¥ ê¸´ ìˆ˜ì—´ì€ íˆ¬ í¬ì¸í„°ë¥¼ í†µí•´ ì°¾ëŠ”ë‹¤.
*/

let line = readLine()!.split(separator: " ").map { Int($0)! }
let (n, k) = (line[0], line[1])
let nums = readLine()!.split(separator: " ").map { Int($0)! }

var en = 0
var cnt = nums[0] % 2 == 0 ? 0 : 1 // ë§¨ ì²« ìˆ«ìê°€ í™€ìˆ˜ì´ë©´ cnt 1ë¶€í„° ì‹œì‘
var ans = 0

for st in 0..<n { // stë¥¼ ê¸°ì¤€ìœ¼ë¡œ íƒìƒ‰í•´ë³´ì
    while en < n && cnt <= k { // ì•„ì§ ì œê±°í•  ìˆ˜ ìˆëŠ” í™€ìˆ˜ì˜ ê°œìˆ˜ì´ê³  enì´ ë²”ìœ„ ë‚´ì´ë©´
        en += 1 // enì„ ì´ë™ì‹œí‚¨ë‹¤
        if en != n && nums[en] % 2 != 0 { cnt += 1 } // ì´ë™ì‹œí‚¨ enì´ í™€ìˆ˜ì´ë©´ cnt ì¶”ê°€
    }

    if en == n { // ê°€ì¥ ê¸´ ì§ìˆ˜ ë°°ì—´ì´ ë§¨ ëê¹Œì§€ ë„ë‹¬í•œ ê²½ìš°
        ans = max(ans, en - st - cnt)
        break
    }

    ans = max(ans, en - st + 1 - cnt) // en - st + 1ë¡œ ê°€ì¥ ê¸´ ìˆ˜ì—´ ê°œìˆ˜ - í™€ìˆ˜ ê°œìˆ˜ë¥¼ í†µí•´ maxê°’ ê°±ì‹ 
    cnt -= (nums[st] % 2 == 0 ? 0 : 1) // nums[st]ê°€ í™€ìˆ˜ì´ë©´ cntì—ì„œ 1 ë¹¼ì£¼ê¸°
}

print(ans)

/*
[âœ… í’€ì´]
 íˆ¬ í¬ì¸í„° êµ¬í˜„ ì‹œ en < n-1 ì¼ ë•Œë¡œ while ì¡°ê±´ì„ ìˆ˜ì •í•˜ë©´ enì´ nì´ ëì„ ë•Œë¥¼ ë”°ë¡œ ê³ ë ¤í•˜ì§€ ì•Šì•„ë„ ëœë‹¤.
*/


//let line = readLine()!.split(separator: " ").map { Int($0)! }
//let (n, k) = (line[0], line[1])
//let nums = readLine()!.split(separator: " ").map { Int($0)! }
//
//var en = 0
//var cnt = nums[0] % 2 == 0 ? 0 : 1
//var ans = 0
//
//for st in 0..<n {
//    while en < n-1 && cnt <= k {
//        en += 1
//        if nums[en] % 2 != 0 { cnt += 1 }
//    }
//
//    ans = max(ans, en - st + 1 - cnt)
//    cnt -= (nums[st] % 2 == 0 ? 0 : 1)
//}
//
//print(ans)
