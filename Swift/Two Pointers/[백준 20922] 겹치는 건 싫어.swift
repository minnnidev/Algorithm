//
//  [ë°±ì¤€ 20922] ê²¹ì¹˜ëŠ” ê±´ ì‹«ì–´.swift
//  Algorithm
//
//  Created by ê¹€ë¯¼ on 3/31/24.
//
// ë°±ì¤€ 20922 ê²¹ì¹˜ëŠ” ê±´ ì‹«ì–´ https://www.acmicpc.net/problem/20922

/*
[ğŸ“Œ ì „ëµ]
 ì—°ì†í•˜ëŠ” ìµœì¥ ìˆ˜ì—´ì˜ ê¸¸ì´ë¥¼ êµ¬í•˜ëŠ” ì¼ë°˜ì ì¸ íˆ¬í¬ì¸í„° ì•Œê³ ë¦¬ì¦˜ í™œìš©
 freqì´ë¼ëŠ” ë¹ˆë„ìˆ˜ ë°°ì—´ì„ í†µí•´ ì…ë ¥ë°›ì€ ìˆ«ìì™€ freq ë°°ì—´ì˜ ì¸ë±ìŠ¤ë¥¼ ë§¤ì¹­í•˜ì—¬ íšŸìˆ˜ë¥¼ ì„¼ë‹¤.
 íšŸìˆ˜ê°€ kê°œ ì´í•˜ì¼ ë•ŒëŠ” enì„ ê³„ì†í•´ì„œ ì˜¤ë¥¸ìª½ìœ¼ë¡œ ì´ë™ì‹œí‚¤ì§€ë§Œ, kê°œë¥¼ ì´ˆê³¼í•œ ê²½ìš°
 stë¥¼ ì˜¤ë¥¸ìª½ìœ¼ë¡œ ì´ë™ì‹œì¼œ ì•Œë§ì€ ìˆ˜ì—´ì„ ì°¾ì•„ê°„ë‹¤.
 í•´ë‹¹ ê³¼ì • ì¤‘ ê°€ì¥ ê¸´ ê¸¸ì´ë„ ê³„ì†í•´ì„œ ê°±ì‹ í•œë‹¤.
*/

let line = readLine()!.split(separator: " ").map { Int($0)! }
let (n, k) = (line[0], line[1])
var freq = Array(repeating: 0, count: 2000003)
var nums = readLine()!.split(separator: " ").map { Int($0)! }
var ans = 0

freq[nums[0]] = 1 // ì²« ë²ˆì§¸ ìˆ˜ì˜ freq ì¸ë±ìŠ¤ ê°’ì„ 1 ì¦ê°€
var en = 0

for st in 0..<n { // stë¥¼ ê¸°ì¤€ìœ¼ë¡œ ìˆœíšŒ
    while en < n && freq[nums[en]] <= k { // nì´ ì•„ì§ ë²”ìœ„ ë‚´ì— ìˆê³ , ë‚˜íƒ€ë‚œ íšŸìˆ˜ë„ k ì´í•˜ì¼ ê²½ìš°
        en += 1 // en ì´ë™
        if en != n { freq[nums[en]] += 1 } // ì´ë™ì‹œí‚¨ enì´ nì´ ì•„ë‹ˆë¼ë©´ ë¹ˆë„ìˆ˜ ì—…ë°ì´íŠ¸
    }

    ans = max(ans, (en-1)-st+1) // kê°œë¥¼ ì´ˆê³¼, í˜¹ì€ ë²”ìœ„ë¥¼ ë²—ì–´ë‚˜ while ë¬¸ì„ íƒˆì¶œí–ˆì„ ê²½ìš° ìµœì¥ ìˆ˜ì—´ ê¸¸ì´ ì¸¡ì •

    freq[nums[st]] -= 1 // st ì´ë™ì„ ìœ„í•´ í˜„ì¬ nums[st]ì— í•´ë‹¹í•˜ëŠ” ë¹ˆë„ìˆ˜ 1 ì‚­ì œ
}

print(ans)
